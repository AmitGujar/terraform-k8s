resource "kubernetes_secret_v1" "name" {
  metadata {
    name      = "tls-secret-x"
    namespace = "default"
    annotations = {
      "cert-manager.io/alt-names"        = "test.9-tails-fox.tech"
      "cert-manager.io/certificate-name" = "tls-secret-x"
      "cert-manager.io/common-name"      = "test.9-tails-fox.tech"
      "cert-manager.io/ip-sans"          = ""
      "cert-manager.io/issuer-group"     = "cert-manager.io"
      "cert-manager.io/issuer-kind"      = "ClusterIssuer"
      "cert-manager.io/issuer-name"      = "letsencrypt-production"
      "cert-manager.io/uri-sans"         = ""
    }
    labels = {
      "controller.cert-manager.io/fao" = "true"
    }
  }
  data = {
    "tls.crt" = "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUU5ekNDQTkrZ0F3SUJBZ0lTQklYVUNiUlRyTGFMM3BUVFBLZ2FvNTRRTUEwR0NTcUdTSWIzRFFFQkN3VUEKTURJeEN6QUpCZ05WQkFZVEFsVlRNUll3RkFZRFZRUUtFdzFNWlhRbmN5QkZibU55ZVhCME1Rc3dDUVlEVlFRRApFd0pTTXpBZUZ3MHlOREF5TWpjd056VTNNelZhRncweU5EQTFNamN3TnpVM016UmFNQ0F4SGpBY0JnTlZCQU1UCkZYUmxjM1F1T1MxMFlXbHNjeTFtYjNndWRHVmphRENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTVRYVmJmSmM3T3dtM0hrVklsdE01MTg5ck9SbzBCRXpRc3l2TXIyckJadld0SjhCd2QvcnMxVworQXpDSk1FWnBkVnAwQmYzeVFxSHJBNFBXRzlQRCtOMjdwS0xEbEsvZWVSSnc2TU4wRzl4cW04MWVjOTN6ckxIClhlWVdUUlBrby9yUUtGMzEwVGdRRjI4Zi9lWUtGbmRhV1NiMmhFVzdyUkdZOWZMbHNxbGJGUDVQcytQbnJ1ckEKNm16V1BDT0F0aWFROUdpaSt6cC9Ia1FMZmxuWlBHMHk5MHE2a1ZTWXdQMFJXcmpvaVgvamRycEt4bEdqVU9iVgoybzBjbjRkY1Q1dXZCZGdyU2JwbC9ueGVieE9JVWkwS3pmV29GcHVFWCtYQTV4VFI0M0I0UEdNQ3dBYjRuUTg5ClAvZ0VwSGdCWE4xQnJBL1R0TXdjRlJia00rQ0NsT1VDQXdFQUFhT0NBaGN3Z2dJVE1BNEdBMVVkRHdFQi93UUUKQXdJRm9EQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBUVlJS3dZQkJRVUhBd0l3REFZRFZSMFRBUUgvQkFJdwpBREFkQmdOVkhRNEVGZ1FVSkp4NU56dTVVdnN6TnZYU0RNZWVkM2tPNytjd0h3WURWUjBqQkJnd0ZvQVVGQzZ6CkY3ZFlWc3V1VUFsQTVoK3ZuWXNVd3NZd1ZRWUlLd1lCQlFVSEFRRUVTVEJITUNFR0NDc0dBUVVGQnpBQmhoVm8KZEhSd09pOHZjak11Ynk1c1pXNWpjaTV2Y21jd0lnWUlLd1lCQlFVSE1BS0dGbWgwZEhBNkx5OXlNeTVwTG14bApibU55TG05eVp5OHdJQVlEVlIwUkJCa3dGNElWZEdWemRDNDVMWFJoYVd4ekxXWnZlQzUwWldOb01CTUdBMVVkCklBUU1NQW93Q0FZR1o0RU1BUUlCTUlJQkJBWUtLd1lCQkFIV2VRSUVBZ1NCOVFTQjhnRHdBSFlBU0xEamE5cW0KUnpRUDVXb0MrcDB3Nnh4U0FjdFczU3lCMmJ1L3F6blloSE1BQUFHTjZjaWU4d0FBQkFNQVJ6QkZBaUJEdyt3UApYWjFhSGhoZW9OOGlhbFNMRWxqYjZnSGxGbHBQY1RhQ3pFKzV0Z0loQU1JRmVHVDZzbDc1cUQwaExScW91SmVvCmlIS0FwcEg2alljcjN0ejI2OWJHQUhZQW91Sy8xaDdlTHk4SG9OWk9iVGVuM0dWRHNNYTFMcUxhdDRyNG1tMzEKRjlnQUFBR042Y2lmZGdBQUJBTUFSekJGQWlCYU8zQWpXMjArOE1Ua0Y5amxIbXdwZnpMRmlIZG1IZ09haU5NegphNGtMOEFJaEFKQWlEK3Y3QzhvUmZoeW9IcFV3WWdNdDNFTXoxOFk3anVKSFk1Vk5vS0JYTUEwR0NTcUdTSWIzCkRRRUJDd1VBQTRJQkFRQWNlQ3d0QzNyM0RIZDNLTy9SSGFybDh5K0RpemdvVFlsVlF3dlEvaGR4bWRlTWM3dGYKR045cDhDcUw0S0RzWnlCc2R3UmxnQmlhcWVjSnJINm5RM0ZZRTY4dW9YcmQrNCtvYVlmdmFuSDlDQTNQRmFQKwpLRDM0WlZYUzZpQ0oxRWtMVTJrSmt3THFJRWZoOUM2em9SdkVhUlM3VGtEWGxXejBEQ0RyTk1tbUxqTFdPV2JQCnBnSk8wN1ZYbzA5NmVvOGp4SUJHSWtmdG1VR2tpYW5DMmQ0VGFHbk5BSzFEVTlZUWNQNnRNdndEWGFNdnZoZUsKYXgxaXh5enFWL0VXMkxTWWRGeHZrdmZaS040WmcvWmRGelZqQTVnd01WVCtSL3AyejRqV3RyOFRiWmtYUG5oMQoxWVQrUkpuMjZLMElDcGh5dDJQV21LYjByekRMMUI5anEwOE0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJRkZqQ0NBdjZnQXdJQkFnSVJBSkVyQ0VyUERCaW5VL2JXTGlXblgxb3dEUVlKS29aSWh2Y05BUUVMQlFBdwpUekVMTUFrR0ExVUVCaE1DVlZNeEtUQW5CZ05WQkFvVElFbHVkR1Z5Ym1WMElGTmxZM1Z5YVhSNUlGSmxjMlZoCmNtTm9JRWR5YjNWd01SVXdFd1lEVlFRREV3eEpVMUpISUZKdmIzUWdXREV3SGhjTk1qQXdPVEEwTURBd01EQXcKV2hjTk1qVXdPVEUxTVRZd01EQXdXakF5TVFzd0NRWURWUVFHRXdKVlV6RVdNQlFHQTFVRUNoTU5UR1YwSjNNZwpSVzVqY25sd2RERUxNQWtHQTFVRUF4TUNVak13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUUM3QWhVb3pQYWdsTk1QRXV5TlZaTEQrSUx4bWFaNlFvaW5YU2FxdFN1NXhVeXhyNDVyK1hYSW85Y1AKUjVRVVZUVlhqSjZvb2prWjlZSThRcWxPYnZVN3d5N2JqY0N3WFBOWk9PZnR6Mm53V2dzYnZzQ1VKQ1dIK2pkeApzeFBuSEt6aG0rL2I1RHRGVWtXV3FjRlR6alRJVXU2MXJ1MlAzbUJ3NHFWVXE3WnREcGVsUURScks5TzhadXRtCk5IejZhNHVQVnltWitEQVhYYnB5Yi91QnhhM1NobGc5RjhmbkNidnhLL2VHM01IYWNWM1VSdVBNclNYQmlMeGcKWjNWbXMvRVk5NkpjNWxQL09vaTJSNlgvRXhqcW1BbDNQNTFUK2M4QjVmV21jQmNVcjJPay81bXprNTNjVTZjRwova2lGSGFGcHJpVjF1eFBNVWdQMTdWR2hpOXNWQWdNQkFBR2pnZ0VJTUlJQkJEQU9CZ05WSFE4QkFmOEVCQU1DCkFZWXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0lHQ0NzR0FRVUZCd01CTUJJR0ExVWRFd0VCL3dRSU1BWUIKQWY4Q0FRQXdIUVlEVlIwT0JCWUVGQlF1c3hlM1dGYkxybEFKUU9ZZnI1MkxGTUxHTUI4R0ExVWRJd1FZTUJhQQpGSG0wV2VaN3R1WGtBWE9BQ0lqSUdsajI2WnR1TURJR0NDc0dBUVVGQndFQkJDWXdKREFpQmdnckJnRUZCUWN3CkFvWVdhSFIwY0RvdkwzZ3hMbWt1YkdWdVkzSXViM0puTHpBbkJnTlZIUjhFSURBZU1CeWdHcUFZaGhab2RIUncKT2k4dmVERXVZeTVzWlc1amNpNXZjbWN2TUNJR0ExVWRJQVFiTUJrd0NBWUdaNEVNQVFJQk1BMEdDeXNHQVFRQgpndDhUQVFFQk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQ0Z5azVIUHFQM2hVU0Z2TlZuZUxLWVk2MTFUUjZXClBUTmxjbFF0Z2FEcXcrMzRJTDlmekxkd0FMZHVPL1plbE43a0lKK203NHV5QStlaXRSWThrYzYwN1RrQzUzd2wKaWtmbVpXNC9SdlRaOE02VUsrNVV6aEs4akNkTHVNR1lMNkt2elhHUlNnaTN5TGdqZXdRdENQa0lWejZEMlFRegpDa2NoZUFtQ0o4TXF5SnU1emx6eVpNakF2bm5BVDQ1dFJBeGVrcnN1OTRzUTRlZ2RSQ25iV1NEdFk3a2grQkltCmxKTlhvQjFsQk1FS0lxNFFEVU9Yb1JnZmZ1RGdoamUxV3JHOU1MK0hiaXNxL3lGT0d3WEQ5UmlYOEY2c3c2VzQKYXZBdXZEc3p1ZTVMM3N6ODVLK0VDNFkvd0ZWRE52Wm80VFlYYW82WjBmK2xRS2MwdDhEUVl6azFPWFZ1OHJwMgp5Sk1DNmFsTGJCZk9EQUxadllIN243ZG8xQVpsczRJOWQxUDRqbmtEclFveEIzVXFROWhWbDNMRUtRNzN4RjFPCnlLNUdoRERYOG9WZkdLRjV1K2RlY0lzSDRZYVR3N21QM0dGeEpTcXYzKzBsVUZKb2k1TGM1ZGExNDlwOTBJZHMKaENFeHJvTDErN21yeUlrWFBlRk01VGdPOXIwcnZaYUJGT3ZWMnowZ3AzNVowK0w0V1BsYnVFak4vbHhQRmluKwpIbFVqcjhnUnNJM3FmSk9RRnkvOXJLSUpSMFkvOE9td3QvOG9UV2d5MW1kZUhtbWprN2oxbllzdkM5SlNRNlp2Ck1sZGxUVEtCM3poVGhWMStYV1lwNnJqZDVKVzF6YlZXRWtMTnhFN0dKVGhFVUczc3pnQlZHUDdwU1dUVVRzcVgKbkxSYndIT29xN2hId2c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    "tls.key" = "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeE5kVnQ4bHpzN0NiY2VSVWlXMHpuWHoyczVHalFFVE5Deks4eXZhc0ZtOWEwbndICkIzK3V6VmI0RE1Ja3dSbWwxV25RRi9mSkNvZXNEZzlZYjA4UDQzYnVrb3NPVXI5NTVFbkRvdzNRYjNHcWJ6VjUKejNmT3NzZGQ1aFpORStTait0QW9YZlhST0JBWGJ4Lzk1Z29XZDFwWkp2YUVSYnV0RVpqMTh1V3lxVnNVL2srego0K2V1NnNEcWJOWThJNEMySnBEMGFLTDdPbjhlUkF0K1dkazhiVEwzU3JxUlZKakEvUkZhdU9pSmYrTjJ1a3JHClVhTlE1dFhhalJ5ZmgxeFBtNjhGMkN0SnVtWCtmRjV2RTRoU0xRck45YWdXbTRSZjVjRG5GTkhqY0hnOFl3TEEKQnZpZER6MC8rQVNrZUFGYzNVR3NEOU8wekJ3VkZ1UXo0SUtVNVFJREFRQUJBb0lCQVFDcFEwM1hXMmlkMUxqbQpaK1IxeEN5Rk9XYmVwTmFQdGxublRqcmdBTnViOHlkVEpnblpYZWRQZFlDWlgvekErN0FKWXhMbytVNnNPbHd1ClB1M1owVStsVnFqeDVKZHRlbTl6YWliTHVGNUs1cUFiUHcyKzVKUWVVYWVoNmYxZnBOV0pJS1FGb0JMSHRiYWcKL1E2VVdJcFhHWjdlRFU5U3MzNndTaXI4TXA2K1Z5elhGNTN0NThHdk5DbEpGdnhjdFN6RUVNWEtXOG9Xei81UwpiSG5KU0gxYnNnYStVTFdnZE5zcEdDbzd0NDFEK2lROXZuN3VLRzR4bld5YVhnQWlGZmo5T0tBbWlSUU5jT0t6CmxlUkxKbndWakd1Y3NUbHZzWmp6YWZxUWVyN2lmaFFMSFZKdGJBUnJpZm1UNVlFOTNhM1dyS0RKSm9zOWhWUm8KSDRobWJNakZBb0dCQU9pc1RTUVJmbkVTd1NBOXJkOVlkQll6dUtGTG5kakVBUkdOelpvcDd6YTBFSktLejFkZwo3Tnhpem9pcWNwL2pKNHNLRnNBamhyTzBUT1VWbVkwckpHUHpGSDBHbTdFYTV4RUl6WThna2hRZHQrd0lGNXZ5CkEreDdnMWVCZjlLeWpiVmluRmhhK0RIYmc1cXcvTEovTUFjUGV3M2s0ZkE1bmcxdVpBUEh0eDJYQW9HQkFOaVQKWXE4TTFkYnZaaU01SXZmam1yWXNzN3JaS2dUTklRc1BublAvdHkvNUxkM0NZUCs0Rm81QzBZUklXbFdWYWY1SgpUZ0pzeU9vYW5GWTBBRTlPN2tacU93UE03M3ZpVE03YjlScWQ4V2h5YnI4TnZyL3poTzFNWFNqVUFaaDNMSVFHCmQ2SDVJaXovVFNtWnNXT25kczV3M1FCNHAxbEVFZjBBOFFaRGttampBb0dBR21nandTb3pIWVl4WVFWZkRIQXYKaksyR0VOaFNLOTNpK1NrTTRxaEx1L3VudmRuL09qMkg1R05hYVd4ZTRnS1g1RkhhenllNURBQTBrZk5ubi92NwpmMVNCU01kTk9FYURYdzJPdHVYTmJuY0kvc0xVV3lDV2pXcGZON2s4MXA3cE1tTGt0NnByYk0wckhJMWx3S1JxCndRSml4dXJwTWFoNFpiSFhyQTRvbkRVQ2dZQTdzZVF4ZThnMVJpZFE3aDdGVk9iLzc3SmFmaUVtMGFPWitPUWoKOVFmNUlTV1RTbENTSzV1TCtyN2xSMHdlNnVBY1J2aEprdEtPTkdlREd6STZxZmJqVWNTU2Q1cEsrMFZRZnpBLwo5ZWprY1NZMVl3U0F4QTZQbWN6VHhCdnNlbXk2dDAyaVI1a3o3ZXJHM0tZWVljQk5ocTVqd3QzZHJQV0lWd29ZClArZkxJUUtCZ1FEWmpiVno2azNNT2d5L2RLclA0OHJGNTEzSWt6WWdCbEFPSXNVVnBQYVBQdzM4eGFtcitNeTUKQ29sZVFvTHU0RjV6Y3FUVThxMTV2YkwzVzNRM1NZU1BSZ2lpZVFDdkNGb0taTEhZWng0cUJQUFhMWmZkc3RHZQpvNDMwc0JCbm5jRGNlWUFyTEQrWFNySUhoRjBrajJ5dHI4VTVRYkZnQ1gzZ2w4bGU1dXdtY0E9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="
  }
  type = "kubernetes.io/tls"
}

resource "kubernetes_storage_class_v1" "storage_class" {
  metadata {
    name = "ebs-sc"
  }
  storage_provisioner    = "ebs.csi.aws.com"
  reclaim_policy         = "Delete"
  mount_options          = []
  allow_volume_expansion = true
  volume_binding_mode    = "WaitForFirstConsumer"
}


# resource "kubernetes_persistent_volume_claim" "pvc" {
#   metadata {
#     name      = "ebs-claim"
#     namespace = "default"
#   }

#   spec {
#     access_modes = ["ReadWriteOnce"]
#     resources {
#       requests = {
#         storage = "30Gi"
#       }
#     }
#     storage_class_name = "ebs-sc"
#   }

#   depends_on = [kubernetes_storage_class_v1.storage_class]
# }

resource "helm_release" "neo4j" {
  name       = "neo4j"
  chart      = "neo4j"
  repository = "https://helm.neo4j.com/neo4j"
  namespace  = "default"
  # values     = [file("${path.module}/values.yml")]

  depends_on = [kubernetes_storage_class_v1.storage_class]
}
